name: Test Checkout With Sleep

on:
  push:
    branches:
      - main
      - copilot/**
  workflow_dispatch:

jobs:
  first-checkout-and-commit:
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - name: First checkout
        uses: actions/checkout@v4

      - name: Log first checkout SHA
        run: |
          echo "=== First checkout ==="
          echo "Current commit SHA: $(git rev-parse HEAD)"
          echo "Current branch: $(git branch --show-current)"
          git --no-pager log -1 --oneline

      - name: Sleep for 5 minutes
        run: |
          echo "Sleeping for 5 minutes to allow for manual new commits..."
          sleep 300

  second-checkout-and-compare:
    runs-on: ubuntu-latest
    needs: first-checkout-and-commit
    permissions:
      contents: read

    steps:
      - name: Second checkout
        uses: actions/checkout@v4

      - name: Log second checkout SHA
        run: |
          echo "=== Second checkout ==="
          echo "Current commit SHA: $(git rev-parse HEAD)"
          echo "Current branch: $(git branch --show-current)"
          git --no-pager log -1 --oneline
